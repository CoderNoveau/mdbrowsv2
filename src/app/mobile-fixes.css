/* Mobile Optimization Fixes */

/* Fix hamburger menu */
@media (max-width: 991px) {
  .mobile-menu-toggle {
    display: block !important;
    position: relative;
    z-index: 1002;
    padding: 8px;
    -webkit-tap-highlight-color: transparent;
  }
  
  .hamburger {
    display: block !important;
    width: 28px;
    height: 24px;
    position: relative;
  }
  
  .hamburger-line {
    position: absolute;
    display: block;
    width: 100%;
    height: 3px;
    background: var(--text, #333);
    border-radius: 3px;
    transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
    left: 0;
  }
  
  .hamburger-line:nth-child(1) {
    top: 0;
  }
  
  .hamburger-line:nth-child(2) {
    top: 50%;
    transform: translateY(-50%);
  }
  
  .hamburger-line:nth-child(3) {
    bottom: 0;
  }
  
  /* Animated hamburger */
  .mobile-menu-toggle.active .hamburger-line:nth-child(1) {
    transform: translateY(10.5px) rotate(45deg);
  }
  
  .mobile-menu-toggle.active .hamburger-line:nth-child(2) {
    opacity: 0;
    transform: translateX(-20px);
  }
  
  .mobile-menu-toggle.active .hamburger-line:nth-child(3) {
    transform: translateY(-10.5px) rotate(-45deg);
  }
  
  /* Mobile nav positioning */
  .mobile-nav {
    display: block !important;
    position: fixed;
    top: 0;
    right: -100%;
    width: 85%;
    max-width: 350px;
    height: 100vh;
    background: white;
    z-index: 1001;
    transition: right 0.3s ease-in-out;
    box-shadow: -4px 0 24px rgba(0, 0, 0, 0.15);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  .mobile-nav.active {
    right: 0;
  }
  
  /* Mobile menu overlay */
  .mobile-menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
  }
}

/* Mobile Image Optimization */
@media (max-width: 768px) {
  /* Lazy load images */
  img {
    loading: lazy;
  }
  
  /* Hero images mobile optimization */
  .hero-bg-image {
    object-fit: cover !important;
    object-position: center center !important;
  }
  
  /* Service cards images */
  .service-image {
    aspect-ratio: 4/3;
    object-fit: cover;
    width: 100%;
    height: auto;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
  
  .service-image-wrapper {
    display: block !important;
    position: relative;
    width: 100%;
    height: auto;
    overflow: hidden;
  }
  
  .service-card {
    display: block !important;
    visibility: visible !important;
  }
  
  /* Optimize gallery images */
  .gallery-image {
    aspect-ratio: 1/1;
    object-fit: cover;
    width: 100%;
    height: auto;
  }
  
  /* Reduce image quality on mobile for faster loading */
  .hero-bg-wrapper picture img {
    filter: none;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }
}

/* Mobile Touch Optimization */
@media (max-width: 768px) {
  /* Increase touch targets */
  .btn {
    min-height: 48px;
    min-width: 48px;
    padding: 12px 24px;
    font-size: 16px; /* Prevent zoom on iOS */
  }
  
  .nav-link,
  .mobile-nav-item a {
    min-height: 48px;
    display: flex;
    align-items: center;
    padding: 12px 16px;
  }
  
  /* Fix mobile dropdown */
  .mobile-nav-dropdown-toggle {
    min-height: 48px;
    padding: 12px 16px;
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  /* Prevent double-tap zoom */
  * {
    touch-action: manipulation;
  }
  
  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }
}

/* Mobile Performance Fixes */
@media (max-width: 768px) {
  /* Reduce animations on mobile */
  * {
    animation-duration: 0.2s !important;
    transition-duration: 0.2s !important;
  }
  
  /* Disable parallax on mobile */
  .parallax {
    transform: none !important;
  }
  
  /* Optimize fonts */
  body {
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
  }
  
  /* Hide non-essential elements */
  .desktop-only {
    display: none !important;
  }
}

/* Mobile Layout Fixes */
@media (max-width: 768px) {
  /* Fix header */
  .header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 999;
    background: white;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  
  .header-container {
    padding: 12px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .header-logo {
    max-width: 220px;
    height: auto;
  }
  
  /* Add padding for fixed header */
  main,
  .page-content {
    padding-top: 70px !important;
  }
  
  /* Hero section mobile */
  .hero-section {
    height: 70vh !important;
    min-height: 500px;
  }
  
  .hero-content-box {
    padding: 20px;
    text-align: center;
  }
  
  .hero-heading {
    font-size: 2rem !important;
    line-height: 1.2;
    margin-bottom: 12px;
  }
  
  .hero-text {
    font-size: 1rem !important;
    margin-bottom: 20px;
  }
  
  .hero-buttons {
    flex-direction: column;
    gap: 12px;
    width: 100%;
  }
  
  .hero-buttons .btn {
    width: 100%;
    justify-content: center;
  }
  
  /* Services grid mobile */
  .services-grid {
    grid-template-columns: 1fr !important;
    gap: 20px;
    padding: 0 16px;
  }
  
  .service-card {
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border-radius: 8px;
    overflow: hidden;
  }
  
  /* Gallery mobile */
  .gallery-grid {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 10px;
    padding: 0 16px;
  }
  
  /* Footer mobile */
  .footer-content {
    flex-direction: column;
    text-align: center;
  }
  
  .footer-section {
    margin-bottom: 30px;
    width: 100%;
  }
}

/* iPhone Notch Safe Areas */
@supports (padding: max(0px)) {
  .header,
  .mobile-nav {
    padding-top: max(12px, env(safe-area-inset-top));
  }
  
  .footer,
  .mobile-nav-footer {
    padding-bottom: max(20px, env(safe-area-inset-bottom));
  }
  
  .page-content {
    padding-left: max(16px, env(safe-area-inset-left));
    padding-right: max(16px, env(safe-area-inset-right));
  }
}

/* Fix homepage service images on mobile */
@media (max-width: 768px) {
  .services-section .service-image-wrapper {
    min-height: 200px;
    background: #f5f5f5;
  }
  
  .services-section .service-image {
    position: relative !important;
    width: 100% !important;
    height: 200px !important;
    object-fit: cover !important;
  }
  
  .services-section img {
    display: block !important;
    max-width: 100% !important;
    height: auto !important;
  }
}

/* Small Mobile Devices */
@media (max-width: 375px) {
  .hero-heading {
    font-size: 1.75rem !important;
  }
  
  .header-logo {
    max-width: 180px;
  }
  
  .btn {
    font-size: 14px;
    padding: 10px 20px;
  }
  
  .services-grid,
  .gallery-grid {
    padding: 0 12px;
  }
}